# Performance otimizations para servidor com múltiplos núcleos
workspace-concurrency=20

# Cache settings
store-dir=~/.pnpm-store
package-import-method=hardlink

# Build performance
prefer-offline=true
fetch-retries=2
fetch-timeout=60000

# Strict settings
auto-install-peers=true
strict-peer-dependencies=false

# Security: Bloqueia execução de scripts postinstall/preinstall
# Isso previne que dependências maliciosas executem código durante npm/pnpm install
# IMPORTANTE: Após instalar, execute manualmente: pnpm run postinstall:safe
ignore-scripts=true

# pnpm: corrigir config inválida `only-built-dependencies=true`
# Em algumas instalações, essa opção pode ficar como boolean e quebrar o pnpm (onlyBuiltDependencies?.sort).
# Definimos explicitamente como lista (array) para manter comportamento determinístico.
# Obs: como `ignore-scripts=true`, esta lista só importa se você optar por permitir build/scripts de deps específicas.
only-built-dependencies[]=@prisma/client
only-built-dependencies[]=@prisma/engines
