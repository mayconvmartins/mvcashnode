{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getHello","summary":"Mensagem de boas-vindas","description":"Retorna uma mensagem de boas-vindas da API","parameters":[],"responses":{"200":{"description":"Mensagem de boas-vindas","content":{"application/json":{"example":"Trading Automation API - Bem-vindo!"}}}},"tags":["Health"]}},"/health":{"get":{"operationId":"AppController_getHealth","summary":"Health check da API","description":"Verifica o status de saúde da API","parameters":[],"responses":{"200":{"description":"API está funcionando","content":{"application/json":{"schema":{"example":{"status":"ok","timestamp":"2025-02-12T10:00:00.000Z"}}}}}},"tags":["Health"]}},"/auth/login":{"post":{"operationId":"AuthController_login","summary":"Autenticação de usuário","description":"Realiza login do usuário e retorna tokens de acesso e refresh. Se o usuário tiver 2FA habilitado, o campo twoFactorCode é obrigatório.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":"Login bem-sucedido","content":{"application/json":{"schema":{"example":{"accessToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","refreshToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","user":{"id":1,"email":"admin@example.com","roles":["admin"]}}}}}},"401":{"description":"Credenciais inválidas ou código 2FA incorreto","content":{"application/json":{"schema":{"example":{"statusCode":401,"message":"Invalid credentials","error":"Unauthorized"}}}}}},"tags":["Auth"]}},"/auth/refresh":{"post":{"operationId":"AuthController_refresh","summary":"Renovar access token","description":"Renova o token de acesso usando o refresh token. O refresh token deve ser válido e não expirado.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenDto"}}}},"responses":{"200":{"description":"Token renovado com sucesso","content":{"application/json":{"schema":{"example":{"accessToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","refreshToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}}}}},"401":{"description":"Refresh token inválido ou expirado","content":{"application/json":{"schema":{"example":{"statusCode":401,"message":"Invalid refresh token","error":"Unauthorized"}}}}}},"tags":["Auth"]}},"/auth/2fa/setup":{"post":{"operationId":"AuthController_setup2FA","summary":"Configurar autenticação de dois fatores (2FA)","description":"Gera um QR code e secret para configurar 2FA no aplicativo autenticador do usuário. O usuário deve escanear o QR code e depois verificar com o endpoint /auth/2fa/verify.","parameters":[],"responses":{"200":{"description":"2FA configurado com sucesso","content":{"application/json":{"schema":{"example":{"secret":"JBSWY3DPEHPK3PXP","qrCode":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...","backupCodes":["12345678","87654321"]}}}}}},"tags":["Auth"],"security":[{"bearer":[]}]}},"/auth/2fa/verify":{"post":{"operationId":"AuthController_verify2FA","summary":"Verificar código 2FA","description":"Verifica o código TOTP gerado pelo aplicativo autenticador. Deve ser chamado após /auth/2fa/setup para ativar o 2FA.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Verify2FADto"}}}},"responses":{"200":{"description":"2FA verificado e ativado com sucesso","content":{"application/json":{"schema":{"example":{"valid":true,"message":"2FA ativado com sucesso"}}}}},"400":{"description":"Código 2FA inválido","content":{"application/json":{"schema":{"example":{"statusCode":400,"message":"Invalid 2FA token","error":"Bad Request"}}}}}},"tags":["Auth"],"security":[{"bearer":[]}]}},"/me":{"get":{"operationId":"UsersController_getMe","summary":"Obter dados do usuário atual","parameters":[],"responses":{"200":{"description":"Dados do usuário"}},"tags":["Users"],"security":[{"bearer":[]}]},"put":{"operationId":"UsersController_updateMe","summary":"Atualizar dados do usuário","parameters":[],"responses":{"200":{"description":"Usuário atualizado"}},"tags":["Users"],"security":[{"bearer":[]}]}},"/me/login-history":{"get":{"operationId":"UsersController_getLoginHistory","summary":"Histórico de login","parameters":[],"responses":{"200":{"description":"Histórico de login"}},"tags":["Users"],"security":[{"bearer":[]}]}},"/exchange-accounts":{"get":{"operationId":"ExchangeAccountsController_list","summary":"Listar contas de exchange","description":"Retorna todas as contas de exchange do usuário autenticado, incluindo contas reais e de simulação.","parameters":[],"responses":{"200":{"description":"Lista de contas de exchange","content":{"application/json":{"schema":{"example":[{"id":1,"exchange":"BINANCE_SPOT","label":"Minha Conta Binance","is_simulation":false,"is_active":true,"testnet":false,"created_at":"2025-02-12T10:00:00.000Z"}]}}}}},"tags":["Exchange Accounts"],"security":[{"bearer":[]}]},"post":{"operationId":"ExchangeAccountsController_create","summary":"Criar conta de exchange","description":"Cria uma nova conta de exchange. As credenciais (API key e secret) são criptografadas antes de serem armazenadas. Para contas de simulação, as credenciais são opcionais.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateExchangeAccountDto"}}}},"responses":{"201":{"description":"Conta criada com sucesso","content":{"application/json":{"schema":{"example":{"id":1,"exchange":"BINANCE_SPOT","label":"Minha Conta Binance","is_simulation":false,"is_active":true,"testnet":false,"created_at":"2025-02-12T10:00:00.000Z"}}}}},"400":{"description":"Dados inválidos","content":{"application/json":{"schema":{"example":{"statusCode":400,"message":["exchange must be a valid enum value"],"error":"Bad Request"}}}}}},"tags":["Exchange Accounts"],"security":[{"bearer":[]}]}},"/exchange-accounts/{id}":{"get":{"operationId":"ExchangeAccountsController_getOne","summary":"Obter conta de exchange por ID","description":"Retorna os detalhes de uma conta de exchange específica. Apenas contas do usuário autenticado podem ser acessadas.","parameters":[{"name":"id","required":true,"in":"path","description":"ID da conta de exchange","schema":{"example":1,"type":"number"}}],"responses":{"200":{"description":"Conta encontrada","content":{"application/json":{"schema":{"example":{"id":1,"exchange":"BINANCE_SPOT","label":"Minha Conta Binance","is_simulation":false,"is_active":true,"testnet":false,"created_at":"2025-02-12T10:00:00.000Z","updated_at":"2025-02-12T10:00:00.000Z"}}}}},"404":{"description":"Conta não encontrada ou não pertence ao usuário","content":{"application/json":{"schema":{"example":{"statusCode":404,"message":"Exchange account not found","error":"Not Found"}}}}}},"tags":["Exchange Accounts"],"security":[{"bearer":[]}]},"put":{"operationId":"ExchangeAccountsController_update","summary":"Atualizar conta","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateExchangeAccountDto"}}}},"responses":{"200":{"description":"Conta atualizada"}},"tags":["Exchange Accounts"],"security":[{"bearer":[]}]},"delete":{"operationId":"ExchangeAccountsController_delete","summary":"Deletar conta","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Conta deletada"}},"tags":["Exchange Accounts"],"security":[{"bearer":[]}]}},"/exchange-accounts/{id}/test-connection":{"post":{"operationId":"ExchangeAccountsController_testConnection","summary":"Testar conexão com exchange","description":"Testa a conexão com a exchange usando as credenciais armazenadas. Verifica se a API key e secret são válidas e se a conta tem permissões necessárias.","parameters":[{"name":"id","required":true,"in":"path","description":"ID da conta de exchange","schema":{"example":1,"type":"number"}}],"responses":{"200":{"description":"Resultado do teste de conexão","content":{"application/json":{"schema":{"example":{"success":true,"message":"Connection successful"}}}}},"400":{"description":"Falha na conexão","content":{"application/json":{"schema":{"example":{"success":false,"message":"Connection failed","error":"Invalid API credentials"}}}}}},"tags":["Exchange Accounts"],"security":[{"bearer":[]}]}},"/vaults":{"get":{"operationId":"VaultsController_list","summary":"Listar cofres","parameters":[],"responses":{"200":{"description":"Lista de cofres"}},"tags":["Vaults"],"security":[{"bearer":[]}]},"post":{"operationId":"VaultsController_create","summary":"Criar cofre","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateVaultDto"}}}},"responses":{"201":{"description":"Cofre criado"}},"tags":["Vaults"],"security":[{"bearer":[]}]}},"/vaults/{id}":{"get":{"operationId":"VaultsController_getOne","summary":"Obter cofre por ID","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Cofre encontrado"}},"tags":["Vaults"],"security":[{"bearer":[]}]}},"/vaults/{id}/balances":{"get":{"operationId":"VaultsController_getBalances","summary":"Obter saldos do cofre","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Saldos do cofre"}},"tags":["Vaults"],"security":[{"bearer":[]}]}},"/vaults/{id}/transactions":{"get":{"operationId":"VaultsController_getTransactions","summary":"Obter transações do cofre","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Transações do cofre"}},"tags":["Vaults"],"security":[{"bearer":[]}]}},"/vaults/{id}/deposit":{"post":{"operationId":"VaultsController_deposit","summary":"Depositar no cofre","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DepositDto"}}}},"responses":{"200":{"description":"Depósito realizado"}},"tags":["Vaults"],"security":[{"bearer":[]}]}},"/vaults/{id}/withdraw":{"post":{"operationId":"VaultsController_withdraw","summary":"Sacar do cofre","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WithdrawDto"}}}},"responses":{"200":{"description":"Saque realizado"}},"tags":["Vaults"],"security":[{"bearer":[]}]}},"/webhook-sources":{"get":{"operationId":"WebhookSourcesController_list","summary":"Listar webhook sources","parameters":[],"responses":{"200":{"description":"Lista de webhook sources"}},"tags":["Webhooks"],"security":[{"bearer":[]}]},"post":{"operationId":"WebhookSourcesController_create","summary":"Criar webhook source","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateWebhookSourceDto"}}}},"responses":{"201":{"description":"Webhook source criado"}},"tags":["Webhooks"],"security":[{"bearer":[]}]}},"/webhook-sources/{id}":{"get":{"operationId":"WebhookSourcesController_getOne","summary":"Obter webhook source por ID","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Webhook source encontrado"}},"tags":["Webhooks"],"security":[{"bearer":[]}]},"put":{"operationId":"WebhookSourcesController_update","summary":"Atualizar webhook source","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Webhook source atualizado"}},"tags":["Webhooks"],"security":[{"bearer":[]}]},"delete":{"operationId":"WebhookSourcesController_delete","summary":"Deletar webhook source","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Webhook source deletado"}},"tags":["Webhooks"],"security":[{"bearer":[]}]}},"/webhook-sources/{sourceId}/bindings":{"get":{"operationId":"WebhookBindingsController_list","summary":"Listar bindings de webhook source","parameters":[{"name":"sourceId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Lista de bindings"}},"tags":["Webhooks"],"security":[{"bearer":[]}]},"post":{"operationId":"WebhookBindingsController_create","summary":"Criar binding","parameters":[{"name":"sourceId","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBindingDto"}}}},"responses":{"201":{"description":"Binding criado"}},"tags":["Webhooks"],"security":[{"bearer":[]}]}},"/webhook-sources/{sourceId}/bindings/{bindingId}":{"delete":{"operationId":"WebhookBindingsController_delete","summary":"Deletar binding","parameters":[{"name":"sourceId","required":true,"in":"path","schema":{"type":"number"}},{"name":"bindingId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Binding deletado"}},"tags":["Webhooks"],"security":[{"bearer":[]}]}},"/webhook-events":{"get":{"operationId":"WebhookEventsController_list","summary":"Listar webhook events","parameters":[{"name":"webhookSourceId","required":false,"in":"query","schema":{"type":"number"}},{"name":"status","required":false,"in":"query","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Lista de webhook events"}},"tags":["Webhooks"],"security":[{"bearer":[]}]}},"/webhook-events/{id}":{"get":{"operationId":"WebhookEventsController_getOne","summary":"Obter webhook event por ID","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Webhook event encontrado"}},"tags":["Webhooks"],"security":[{"bearer":[]}]}},"/webhooks/{code}":{"post":{"operationId":"WebhooksController_receiveWebhook","summary":"Receber sinal de trading via webhook","parameters":[{"name":"code","required":true,"in":"path","description":"Código único do webhook source","schema":{"type":"string"}},{"name":"x-signature","required":true,"in":"header","schema":{"type":"string"}},{"name":"X-Signature","in":"header","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Webhook recebido e enfileirado"},"403":{"description":"Acesso negado (IP ou assinatura inválida)"},"404":{"description":"Webhook code não encontrado"},"429":{"description":"Rate limit excedido"}},"tags":["Webhooks"]}},"/positions":{"get":{"operationId":"PositionsController_list","summary":"Listar posições","parameters":[{"name":"status","required":false,"in":"query","schema":{"enum":["OPEN","CLOSED"],"type":"string"}},{"name":"trade_mode","required":false,"in":"query","schema":{"enum":["REAL","SIMULATION"],"type":"string"}},{"name":"exchange_account_id","required":false,"in":"query","schema":{"type":"number"}},{"name":"symbol","required":false,"in":"query","schema":{"type":"string"}},{"name":"from","required":false,"in":"query","schema":{"type":"string"}},{"name":"to","required":false,"in":"query","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Lista de posições"}},"tags":["Positions"],"security":[{"bearer":[]}]}},"/positions/{id}":{"get":{"operationId":"PositionsController_getOne","summary":"Obter posição por ID","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Posição encontrada"}},"tags":["Positions"],"security":[{"bearer":[]}]}},"/positions/{id}/sltp":{"put":{"operationId":"PositionsController_updateSLTP","summary":"Atualizar SL/TP da posição","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSLTPDto"}}}},"responses":{"200":{"description":"SL/TP atualizado"}},"tags":["Positions"],"security":[{"bearer":[]}]}},"/positions/{id}/lock-sell-by-webhook":{"put":{"operationId":"PositionsController_lockSellByWebhook","summary":"Travar venda por webhook","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Lock atualizado"}},"tags":["Positions"],"security":[{"bearer":[]}]}},"/positions/{id}/close":{"post":{"operationId":"PositionsController_close","summary":"Fechar posição (total ou parcial)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClosePositionDto"}}}},"responses":{"201":{"description":"Job de fechamento criado"}},"tags":["Positions"],"security":[{"bearer":[]}]}},"/positions/{id}/sell-limit":{"post":{"operationId":"PositionsController_sellLimit","summary":"Vender posição com ordem LIMIT","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SellLimitDto"}}}},"responses":{"201":{"description":"Ordem LIMIT criada"}},"tags":["Positions"],"security":[{"bearer":[]}]}},"/limit-orders":{"get":{"operationId":"LimitOrdersController_list","summary":"Listar ordens LIMIT","parameters":[{"name":"status","required":false,"in":"query","schema":{"enum":["PENDING_LIMIT","FILLED","CANCELED","EXPIRED"],"type":"string"}},{"name":"side","required":false,"in":"query","schema":{"enum":["BUY","SELL"],"type":"string"}},{"name":"trade_mode","required":false,"in":"query","schema":{"enum":["REAL","SIMULATION"],"type":"string"}},{"name":"symbol","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Lista de ordens LIMIT"}},"tags":["Limit Orders"],"security":[{"bearer":[]}]}},"/limit-orders/{id}":{"get":{"operationId":"LimitOrdersController_getOne","summary":"Detalhes de ordem LIMIT","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Detalhes da ordem"}},"tags":["Limit Orders"],"security":[{"bearer":[]}]},"delete":{"operationId":"LimitOrdersController_cancel","summary":"Cancelar ordem LIMIT","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Ordem cancelada"}},"tags":["Limit Orders"],"security":[{"bearer":[]}]}},"/limit-orders/history":{"get":{"operationId":"LimitOrdersController_history","summary":"Histórico de ordens LIMIT","parameters":[{"name":"from","required":false,"in":"query","schema":{"type":"string"}},{"name":"to","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Histórico de ordens"}},"tags":["Limit Orders"],"security":[{"bearer":[]}]}},"/reports/pnl/summary":{"get":{"operationId":"ReportsController_getPnLSummary","summary":"Resumo de PnL","parameters":[{"name":"trade_mode","required":false,"in":"query","schema":{"enum":["REAL","SIMULATION"],"type":"string"}},{"name":"from","required":false,"in":"query","schema":{"type":"string"}},{"name":"to","required":false,"in":"query","schema":{"type":"string"}},{"name":"exchange_account_id","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Resumo de PnL"}},"tags":["Reports"],"security":[{"bearer":[]}]}},"/reports/pnl/by-symbol":{"get":{"operationId":"ReportsController_getPnLBySymbol","summary":"PnL por símbolo","parameters":[{"name":"trade_mode","required":false,"in":"query","schema":{"enum":["REAL","SIMULATION"],"type":"string"}},{"name":"from","required":false,"in":"query","schema":{"type":"string"}},{"name":"to","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"PnL por símbolo"}},"tags":["Reports"],"security":[{"bearer":[]}]}},"/reports/pnl/by-day":{"get":{"operationId":"ReportsController_getPnLByDay","summary":"PnL por dia","parameters":[{"name":"trade_mode","required":false,"in":"query","schema":{"enum":["REAL","SIMULATION"],"type":"string"}},{"name":"from","required":false,"in":"query","schema":{"type":"string"}},{"name":"to","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"PnL por dia"}},"tags":["Reports"],"security":[{"bearer":[]}]}},"/reports/open-positions/summary":{"get":{"operationId":"ReportsController_getOpenPositionsSummary","summary":"Resumo de posições abertas","parameters":[{"name":"trade_mode","required":false,"in":"query","schema":{"enum":["REAL","SIMULATION"],"type":"string"}}],"responses":{"200":{"description":"Resumo de posições abertas"}},"tags":["Reports"],"security":[{"bearer":[]}]}},"/reports/vaults/summary":{"get":{"operationId":"ReportsController_getVaultsSummary","summary":"Resumo de cofres","parameters":[{"name":"trade_mode","required":false,"in":"query","schema":{"enum":["REAL","SIMULATION"],"type":"string"}},{"name":"from","required":false,"in":"query","schema":{"type":"string"}},{"name":"to","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Resumo de cofres"}},"tags":["Reports"],"security":[{"bearer":[]}]}},"/reports/webhooks/summary":{"get":{"operationId":"ReportsController_getWebhooksSummary","summary":"Resumo de webhooks","parameters":[{"name":"webhook_source_id","required":false,"in":"query","schema":{"type":"number"}},{"name":"from","required":false,"in":"query","schema":{"type":"string"}},{"name":"to","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Resumo de webhooks"}},"tags":["Reports"],"security":[{"bearer":[]}]}},"/admin/users":{"get":{"operationId":"AdminUsersController_list","summary":"Listar todos os usuários","parameters":[{"name":"role","required":false,"in":"query","schema":{"enum":["admin","user"],"type":"string"}},{"name":"is_active","required":false,"in":"query","schema":{"type":"boolean"}},{"name":"email","required":false,"in":"query","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Lista de usuários"}},"tags":["Admin"],"security":[{"bearer":[]}]},"post":{"operationId":"AdminUsersController_create","summary":"Criar novo usuário","parameters":[],"responses":{"201":{"description":"Usuário criado"}},"tags":["Admin"],"security":[{"bearer":[]}]}},"/admin/users/{id}":{"get":{"operationId":"AdminUsersController_getOne","summary":"Obter usuário por ID","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Usuário encontrado"}},"tags":["Admin"],"security":[{"bearer":[]}]},"put":{"operationId":"AdminUsersController_update","summary":"Atualizar usuário","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Usuário atualizado"}},"tags":["Admin"],"security":[{"bearer":[]}]},"delete":{"operationId":"AdminUsersController_delete","summary":"Deletar usuário","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Usuário deletado"}},"tags":["Admin"],"security":[{"bearer":[]}]}},"/admin/users/{id}/activate":{"post":{"operationId":"AdminUsersController_activate","summary":"Ativar usuário","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Usuário ativado"}},"tags":["Admin"],"security":[{"bearer":[]}]}},"/admin/users/{id}/reset-password":{"post":{"operationId":"AdminUsersController_resetPassword","summary":"Resetar senha do usuário","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Senha resetada"}},"tags":["Admin"],"security":[{"bearer":[]}]}},"/admin/users/{id}/audit-logs":{"get":{"operationId":"AdminUsersController_getAuditLogs","summary":"Logs de auditoria do usuário","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}},{"name":"page","required":true,"in":"query","schema":{"type":"number"}},{"name":"limit","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Logs de auditoria"}},"tags":["Admin"],"security":[{"bearer":[]}]}},"/admin/health":{"get":{"operationId":"AdminSystemController_getHealth","summary":"Health check do sistema","parameters":[],"responses":{"200":{"description":"Status do sistema"}},"tags":["Admin"],"security":[{"bearer":[]}]}},"/admin/metrics":{"get":{"operationId":"AdminSystemController_getMetrics","summary":"Métricas do sistema","parameters":[],"responses":{"200":{"description":"Métricas agregadas"}},"tags":["Admin"],"security":[{"bearer":[]}]}},"/admin/audit-logs":{"get":{"operationId":"AdminAuditController_getAuditLogs","summary":"Logs de auditoria de usuários","parameters":[{"name":"user_id","required":false,"in":"query","schema":{"type":"number"}},{"name":"entity_type","required":false,"in":"query","schema":{"type":"string"}},{"name":"action","required":false,"in":"query","schema":{"type":"string"}},{"name":"from","required":false,"in":"query","schema":{"type":"string"}},{"name":"to","required":false,"in":"query","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Logs de auditoria"}},"tags":["Admin"],"security":[{"bearer":[]}]}},"/admin/audit-logs/system":{"get":{"operationId":"AdminAuditController_getSystemAuditLogs","summary":"Logs de auditoria do sistema","parameters":[{"name":"service","required":false,"in":"query","schema":{"type":"string"}},{"name":"severity","required":false,"in":"query","schema":{"type":"string"}},{"name":"from","required":false,"in":"query","schema":{"type":"string"}},{"name":"to","required":false,"in":"query","schema":{"type":"string"}},{"name":"page","required":true,"in":"query","schema":{"type":"number"}},{"name":"limit","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Logs do sistema"}},"tags":["Admin"],"security":[{"bearer":[]}]}},"/admin/audit-logs/{id}":{"get":{"operationId":"AdminAuditController_getOne","summary":"Obter log de auditoria por ID","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Log encontrado"}},"tags":["Admin"],"security":[{"bearer":[]}]}},"/trade-parameters":{"get":{"operationId":"TradeParametersController_list","summary":"Listar parâmetros de trading","parameters":[],"responses":{"200":{"description":"Lista de parâmetros"}},"tags":["Trade Parameters"],"security":[{"bearer":[]}]},"post":{"operationId":"TradeParametersController_create","summary":"Criar parâmetro de trading","parameters":[],"responses":{"201":{"description":"Parâmetro criado"}},"tags":["Trade Parameters"],"security":[{"bearer":[]}]}},"/trade-parameters/{id}":{"put":{"operationId":"TradeParametersController_update","summary":"Atualizar parâmetro","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Parâmetro atualizado"}},"tags":["Trade Parameters"],"security":[{"bearer":[]}]},"delete":{"operationId":"TradeParametersController_delete","summary":"Deletar parâmetro","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Parâmetro deletado"}},"tags":["Trade Parameters"],"security":[{"bearer":[]}]}},"/trade-jobs":{"get":{"operationId":"TradeJobsController_list","summary":"Listar trade jobs","parameters":[{"name":"status","required":false,"in":"query","schema":{"type":"string"}},{"name":"trade_mode","required":false,"in":"query","schema":{"enum":["REAL","SIMULATION"],"type":"string"}}],"responses":{"200":{"description":"Lista de trade jobs"}},"tags":["Jobs & Executions"],"security":[{"bearer":[]}]}},"/trade-jobs/{id}":{"get":{"operationId":"TradeJobsController_getOne","summary":"Obter trade job por ID","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Trade job encontrado"}},"tags":["Jobs & Executions"],"security":[{"bearer":[]}]}},"/trade-executions":{"get":{"operationId":"TradeExecutionsController_list","summary":"Listar execuções","parameters":[],"responses":{"200":{"description":"Lista de execuções"}},"tags":["Jobs & Executions"],"security":[{"bearer":[]}]}},"/trade-executions/{id}":{"get":{"operationId":"TradeExecutionsController_getOne","summary":"Obter execução por ID","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Execução encontrada"}},"tags":["Jobs & Executions"],"security":[{"bearer":[]}]}},"/operations":{"get":{"operationId":"OperationsController_list","summary":"View combinada de jobs e execuções","parameters":[{"name":"trade_mode","required":false,"in":"query","schema":{"enum":["REAL","SIMULATION"],"type":"string"}},{"name":"status","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Lista de operações"}},"tags":["Jobs & Executions"],"security":[{"bearer":[]}]}}},"info":{"title":"Trading Automation API","description":"API de automação de trading para exchanges","version":"1.0.0","contact":{}},"tags":[{"name":"Auth","description":"Autenticação e gerenciamento de usuários"},{"name":"Exchange Accounts","description":"Contas de exchange"},{"name":"Vaults","description":"Cofres virtuais"},{"name":"Positions","description":"Posições abertas e fechadas"},{"name":"Webhooks","description":"Fontes de webhook e eventos"},{"name":"Reports","description":"Relatórios de PnL e performance"},{"name":"Admin","description":"Administração do sistema"}],"servers":[{"url":"http://localhost:4010","description":"Desenvolvimento Local"}],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"LoginDto":{"type":"object","properties":{"email":{"type":"string","example":"user@example.com"},"password":{"type":"string","example":"SecureP@ssw0rd"},"twoFactorCode":{"type":"string","example":"123456"}},"required":["email","password"]},"RefreshTokenDto":{"type":"object","properties":{"refreshToken":{"type":"string"}},"required":["refreshToken"]},"Verify2FADto":{"type":"object","properties":{"token":{"type":"string","example":"123456"}},"required":["token"]},"CreateExchangeAccountDto":{"type":"object","properties":{"exchange":{"type":"string","enum":["BINANCE_SPOT","BINANCE_FUTURES","BYBIT_SPOT","BYBIT_FUTURES"],"example":"BINANCE_SPOT"},"label":{"type":"string","example":"Minha Conta Binance"},"isSimulation":{"type":"boolean","example":false},"apiKey":{"type":"string"},"apiSecret":{"type":"string"},"proxyUrl":{"type":"string"},"testnet":{"type":"boolean","example":false},"initialBalances":{"type":"object","example":{"USDT":1000}}},"required":["exchange","label","isSimulation"]},"UpdateExchangeAccountDto":{"type":"object","properties":{"label":{"type":"string"},"isActive":{"type":"boolean"},"apiKey":{"type":"string"},"apiSecret":{"type":"string"},"proxyUrl":{"type":"string"},"testnet":{"type":"boolean"},"initialBalances":{"type":"object"}}},"CreateVaultDto":{"type":"object","properties":{"name":{"type":"string","example":"Cofre Principal"},"description":{"type":"string","example":"Cofre para trading real"},"tradeMode":{"type":"string","enum":["REAL","SIMULATION"],"example":"REAL"}},"required":["name","tradeMode"]},"DepositDto":{"type":"object","properties":{"asset":{"type":"string","example":"USDT"},"amount":{"type":"number","example":1000}},"required":["asset","amount"]},"WithdrawDto":{"type":"object","properties":{"asset":{"type":"string","example":"USDT"},"amount":{"type":"number","example":500}},"required":["asset","amount"]},"CreateWebhookSourceDto":{"type":"object","properties":{"label":{"type":"string","example":"TradingView Alerts"},"webhookCode":{"type":"string","example":"my-tradingview-alerts"},"tradeMode":{"type":"string","enum":["REAL","SIMULATION"],"example":"REAL"},"allowedIPs":{"example":["192.168.1.0/24","203.0.113.0/24"],"type":"array","items":{"type":"string"}},"requireSignature":{"type":"boolean","example":false},"signingSecret":{"type":"string"},"rateLimitPerMin":{"type":"number","example":60}},"required":["label","webhookCode","tradeMode"]},"CreateBindingDto":{"type":"object","properties":{"exchangeAccountId":{"type":"number","example":1},"isActive":{"type":"boolean","example":true},"weight":{"type":"number","example":1}},"required":["exchangeAccountId"]},"UpdateSLTPDto":{"type":"object","properties":{"slEnabled":{"type":"boolean"},"slPct":{"type":"number","example":2},"tpEnabled":{"type":"boolean"},"tpPct":{"type":"number","example":5},"trailingEnabled":{"type":"boolean"},"trailingDistancePct":{"type":"number","example":1}}},"ClosePositionDto":{"type":"object","properties":{"quantity":{"type":"number","example":2.5},"orderType":{"type":"string","enum":["MARKET","LIMIT","STOP_LIMIT"],"example":"MARKET"},"limitPrice":{"type":"number","example":216}}},"SellLimitDto":{"type":"object","properties":{"limitPrice":{"type":"number","example":220.5},"quantity":{"type":"number","example":2.5},"expiresInHours":{"type":"number","example":24}},"required":["limitPrice"]}}}}